<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Qtpro 4.6.1 for oscommerce 2.3.1</title>

<script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery/jquery-1.4.2.min.js"></script>

<style type="text/css">
body {
	background-color: #6BDAFF;
	margin-left: 75px;
	  font-family: Lucida Grande, Lucida Sans, Verdana, Arial, sans-serif;
	  font-size: 15px;
}
table {
	background-color: #EEEEFF;
	  font-family: Lucida Grande, Lucida Sans, Verdana, Arial, sans-serif;
	  font-size: 14px;	
}

a:link {color:#0000FF;}      /* unvisited link */
 a:visited {color:#0000FF;}  /* visited link */
 a:hover {color:#0000FF;}  /* mouse over link */
 a:active {color:#000000;}  /* selected link */
 
p.thick {
font-weight:bold;
font-size: 16px;
}

.grayed{
background-color:#555555;
}

.whites{
background-color:#ffffff;
}

input.groovybuttonHERE
{
   font-size:14px;
   font-family:Tahoma,sans-serif;
   font-weight:bold;
   color:#000000;
   width:220px;
   height:30px;
   border-style:outset;
   border-color:#BBBBBB;
   border-width:6px;
}

input.groovybutton
{
   font-size:14px;
   font-family:Tahoma,sans-serif;
   font-weight:normal;
   color:#000000;
   width:220px;
   height:30px;
   border-style:outset;
   border-color:#BBBBBB;
   border-width:6px;
}

</style>

<script type="text/javascript">
$(document).ready(function(){
  $("#checkbox2").toggle(function(){
    $("#textarea2").addClass("grayed");},
	 function(){
	$("#textarea2").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox4").toggle(function(){
    $("#textarea4").addClass("grayed");},
	 function(){
	$("#textarea4").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox6").toggle(function(){
    $("#textarea6").addClass("grayed");},
	 function(){
	$("#textarea6").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox8").toggle(function(){
    $("#textarea8").addClass("grayed");},
	 function(){
	$("#textarea8").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox10").toggle(function(){
    $("#textarea10").addClass("grayed");},
	 function(){
	$("#textarea10").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox12").toggle(function(){
    $("#textarea12").addClass("grayed");},
	 function(){
	$("#textarea12").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox13").toggle(function(){
    $("#textarea13").addClass("grayed");},
	 function(){
	$("#textarea13").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox14").toggle(function(){
    $("#textarea14").addClass("grayed");},
	 function(){
	$("#textarea14").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox16").toggle(function(){
    $("#textarea16").addClass("grayed");},
	 function(){
	$("#textarea16").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox18").toggle(function(){
    $("#textarea18").addClass("grayed");},
	 function(){
	$("#textarea18").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox19").toggle(function(){
    $("#textarea19").addClass("grayed");},
	 function(){
	$("#textarea19").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox20").toggle(function(){
    $("#textarea20").addClass("grayed");},
	 function(){
	$("#textarea20").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox21").toggle(function(){
    $("#textarea21").addClass("grayed");},
	 function(){
	$("#textarea21").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox22").toggle(function(){
    $("#textarea22").addClass("grayed");},
	 function(){
	$("#textarea22").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox24").toggle(function(){
    $("#textarea24").addClass("grayed");},
	 function(){
	$("#textarea24").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox26").toggle(function(){
    $("#textarea26").addClass("grayed");},
	 function(){
	$("#textarea26").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox28").toggle(function(){
    $("#textarea28").addClass("grayed");},
	 function(){
	$("#textarea28").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox30").toggle(function(){
    $("#textarea30").addClass("grayed");},
	 function(){
	$("#textarea30").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox32").toggle(function(){
    $("#textarea32").addClass("grayed");},
	 function(){
	$("#textarea32").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox34").toggle(function(){
    $("#textarea34").addClass("grayed");},
	 function(){
	$("#textarea34").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox36").toggle(function(){
    $("#textarea36").addClass("grayed");},
	 function(){
	$("#textarea36").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox38").toggle(function(){
    $("#textarea38").addClass("grayed");},
	 function(){
	$("#textarea38").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox40").toggle(function(){
    $("#textarea40").addClass("grayed");},
	 function(){
	$("#textarea40").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox42").toggle(function(){
    $("#textarea42").addClass("grayed");},
	 function(){
	$("#textarea42").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox44").toggle(function(){
    $("#textarea44").addClass("grayed");},
	 function(){
	$("#textarea44").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox46").toggle(function(){
    $("#textarea46").addClass("grayed");},
	 function(){
	$("#textarea46").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox48").toggle(function(){
    $("#textarea48").addClass("grayed");},
	 function(){
	$("#textarea48").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox50").toggle(function(){
    $("#textarea50").addClass("grayed");},
	 function(){
	$("#textarea50").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox74").toggle(function(){
    $("#textarea74").addClass("grayed");},
	 function(){
	$("#textarea74").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox52").toggle(function(){
    $("#textarea52").addClass("grayed");},
	 function(){
	$("#textarea52").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox54").toggle(function(){
    $("#textarea54").addClass("grayed");},
	 function(){
	$("#textarea54").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox56").toggle(function(){
    $("#textarea56").addClass("grayed");},
	 function(){
	$("#textarea56").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox58").toggle(function(){
    $("#textarea58").addClass("grayed");},
	 function(){
	$("#textarea58").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox60").toggle(function(){
    $("#textarea60").addClass("grayed");},
	 function(){
	$("#textarea60").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox62").toggle(function(){
    $("#textarea62").addClass("grayed");},
	 function(){
	$("#textarea62").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox64").toggle(function(){
    $("#textarea64").addClass("grayed");},
	 function(){
	$("#textarea64").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox66").toggle(function(){
    $("#textarea66").addClass("grayed");},
	 function(){
	$("#textarea66").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox68").toggle(function(){
    $("#textarea68").addClass("grayed");},
	 function(){
	$("#textarea68").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox70").toggle(function(){
    $("#textarea70").addClass("grayed");},
	 function(){
	$("#textarea70").removeClass("grayed");}
  );
});

$(document).ready(function(){
  $("#checkbox72").toggle(function(){
    $("#textarea72").addClass("grayed");},
	 function(){
	$("#textarea72").removeClass("grayed");}
  );
});

</script>

</head>

<body>

<h1>Step by Step QTPRO for Modified oscommerce 2.3.1 Stores.</h1>
<p>
Track and manage attribute stock.
<br />
 You need this if you sell items with various attributes and you want to control the stock on a attribute level.
 <br />
 <br />

<a href="http://addons.oscommerce.com/info/888" target="_blank">Based on Qtpro version 4.6.1</a>
<table width="550" height="32" cellpadding="0" cellspacing="0">
  <tr> <td width="40%">QTPro v4.6.1</td> <td width="30%" align="right">escri2</td> <td width="30%" align="right">9 Aug 2009</td>
  </tr> 
  <tr> <td width="40%">QTPro v4.6.1 Updated Manual</td> <td width="30%" align="right">demastermind</td> <td width="30%" align="right">4 July 2011</td>
  </tr>
</table>
</p>

<p>
Support thread is here (this is also for the older versions of oscommerce that use older versions of this contribution to): <a href="http://forums.oscommerce.com/topic/31484-contribution-qtpro-quantity-tracking-professional/page__hl__qtpro" target="_blanck">http://forums.oscommerce.com/topic/31484-contribution-qtpro-quantity-tracking-professional/page__hl__qtpro</a>
<br />
<br />
This contribution is here: <a href="http://addons.oscommerce.com/info/7786" target="_blanck">http://addons.oscommerce.com/info/7786</a>
  <br />
 <br />

 <table>
 <tr>
 <td>
 
<form name="Manual_for_2.3.1.html" action=".\Manual_for_2.3.1.html">
<input
   type="submit"
   class="groovybuttonHERE"
   value="Step By Step Instructions"
   >
</form>

</td>
<td>

<form name="display_pluging_info" action=".\display_plugin_info.html">
<input
   type="submit"
   class="groovybutton"
   value="Pad_Classes Information"
   >
</form>

</td>
</tr>
</table>

 <br />
 <br />
Before you start... take a BACKUP!
<br />
Copy all new files to their destinations.
<br />
Import sql from SQL file. i.e. Just copy the contents of the file and paste it in the quary window.
<br />
Lets get started... oh, and try using the neat "checkbox feature".
</p>

<p class="thick">1)</p>
<p>admin/includes/boxes/reports.php</p>
<p>Find:</p>

  <p>
    <label for="textarea"></label>
    <textarea name="textarea" cols="120" rows="7" readonly="readonly" id="textarea2">      array(
        'code' => FILENAME_STATS_PRODUCTS_PURCHASED,
        'title' => BOX_REPORTS_PRODUCTS_PURCHASED,
        'link' => tep_href_link(FILENAME_STATS_PRODUCTS_PURCHASED)
      ),
    </textarea>
    <label for="checkbox"></label>
  </p>

<p>Add below:</p>
<p>
  <textarea name="textarea2" cols="120" rows="7" readonly="readonly" id="textarea2">	        array(
        'code' => FILENAME_STATS_LOW_STOCK_ATTRIB,
        'title' => BOX_REPORTS_STATS_LOW_STOCK_ATTRIB,
        'link' => tep_href_link(FILENAME_STATS_LOW_STOCK_ATTRIB)
      ),
    </textarea>
  <input type="checkbox" name="checkbox" id="checkbox2" />
</p>
<hr />
<p class="thick">2)</p>
<p>admin/includes/boxes/tools.php</p>
<p>Find:</p>
<p>
  <textarea name="textarea3" cols="120" rows="7" readonly="readonly" id="textarea4">      array(
        'code' => FILENAME_VERSION_CHECK,
        'title' => BOX_TOOLS_VERSION_CHECK,
        'link' => tep_href_link(FILENAME_VERSION_CHECK)
      ),
  </textarea>
</p>
<p>Add below:</p>
<p>
  <textarea name="textarea4" cols="120" rows="7" readonly="readonly" id="textarea4">	        array(
        'code' => FILENAME_QTPRODOCTOR,
        'title' => BOX_TOOLS_QTPRODOCTOR,
        'link' => tep_href_link(FILENAME_QTPRODOCTOR)
      ),
  </textarea>
  <input type="checkbox" name="checkbox4" id="checkbox4" />
</p>
<hr />
<p class="thick">3.1)
</p>
<p>admin/includes/function/general.php</p>
<p>Find:</p>
<p>
  <textarea name="textarea5" cols="120" rows="7" readonly="readonly" id="textarea6">////
// Function to read in text area in admin</textarea>
</p>
<p>Add before:</p>
<p>
  <textarea name="textarea6" cols="120" rows="7" readonly="readonly" id="textarea6">//++++ QT Pro: Begin Changed code
////
// Function to build menu of available class files given a file prefix
// Used for configuring plug-ins for product information attributes
  function tep_cfg_pull_down_class_files($prefix, $current_file) {
    $d=DIR_FS_CATALOG . 'includes/classes/';
    $function_directory = dir ($d);

    while (false !== ($function = $function_directory->read())) {
      if (preg_match('/^'.$prefix.'(.+)\.php$/',$function,$function_name)) {
          $file_list[]=array('id'=>$function_name[1], 'text'=>$function_name[1]);
      }
    }
    $function_directory->close();

    return tep_draw_pull_down_menu('configuration_value', $file_list, $current_file);
  }

//++++ QT Pro: End Changed Code</textarea>
  <input type="checkbox" name="checkbox3" id="checkbox6" />
</p>
<p class="thick">3.2)</p>
<p>Find:</p>
<p>
  <textarea name="textarea7" cols="120" rows="7" readonly="readonly" id="textarea8">    if (USE_CACHE == 'true') {
      tep_reset_cache_block('categories');
      tep_reset_cache_block('also_purchased');
    }
  }
  </textarea>
</p>
<p>Change to:</p>
<p>
  <textarea name="textarea8" cols="120" rows="7" readonly="readonly" id="textarea8">    if (USE_CACHE == 'true') {
      tep_reset_cache_block('categories');
      tep_reset_cache_block('also_purchased');
    }
	//++++ QT Pro: Begin Changed code
	qtpro_doctor_amputate_all_from_product($product_id);
	//++++ QT Pro: End Changed code
  }</textarea>
  <input type="checkbox" name="checkbox4" id="checkbox8" />
</p>
<p class="thick">3.3)</p>
<p>Find:</p>
<p>
  <textarea name="textarea9" cols="120" rows="7" readonly="readonly" id="textarea10">      $order_query = tep_db_query("select products_id, products_quantity from " . TABLE_ORDERS_PRODUCTS . " where orders_id = '" . (int)$order_id . "'");
      while ($order = tep_db_fetch_array($order_query)) {
        tep_db_query("update " . TABLE_PRODUCTS . " set products_quantity = products_quantity + " . $order['products_quantity'] . ", products_ordered = products_ordered - " . $order['products_quantity'] . " where products_id = '" . (int)$order['products_id'] . "'");
      }
    }
  </textarea>
</p>
<p>Change to:</p>
<p>
  <textarea name="textarea10" cols="120" rows="7" readonly="readonly" id="textarea10"> //++++ QT Pro: Begin Changed code
      $order_query = tep_db_query("select products_id, products_quantity, products_stock_attributes from " . TABLE_ORDERS_PRODUCTS . " where orders_id = '" . (int)$order_id . "'");
      while ($order = tep_db_fetch_array($order_query)) {
        $product_stock_adjust = 0;
        if (tep_not_null($order['products_stock_attributes'])) {
          if ($order['products_stock_attributes'] != '$$DOWNLOAD$$') {
            $attributes_stock_query = tep_db_query("SELECT products_stock_quantity 
                                                    FROM " . TABLE_PRODUCTS_STOCK . " 
                                                    WHERE products_stock_attributes = '" . $order['products_stock_attributes'] . "' 
                                                    AND products_id = '" . (int)$order['products_id'] . "'");
            if (tep_db_num_rows($attributes_stock_query) > 0) {
                $attributes_stock_values = tep_db_fetch_array($attributes_stock_query);
                tep_db_query("UPDATE " . TABLE_PRODUCTS_STOCK . " 
                              SET products_stock_quantity = products_stock_quantity + '" . (int)$order['products_quantity'] . "' 
                              WHERE products_stock_attributes = '" . $order['products_stock_attributes'] . "' 
                              AND products_id = '" . (int)$order['products_id'] . "'");
                $product_stock_adjust = min($order['products_quantity'],  $order['products_quantity']+$attributes_stock_values['products_stock_quantity']);
            } else {
                tep_db_query("INSERT into " . TABLE_PRODUCTS_STOCK . " 
                              (products_id, products_stock_attributes, products_stock_quantity)
                              VALUES ('" . (int)$order['products_id'] . "', '" . $order['products_stock_attributes'] . "', '" . (int)$order['products_quantity'] . "')");
                $product_stock_adjust = $order['products_quantity'];
            }
          }
        } else {
            $product_stock_adjust = $order['products_quantity'];
        } 
        tep_db_query("UPDATE " . TABLE_PRODUCTS . " 
                      SET products_quantity = products_quantity + " . $product_stock_adjust . ", products_ordered = products_ordered - " . (int)$order['products_quantity'] . " 
                      WHERE products_id = '" . (int)$order['products_id'] . "'");
//++++ QT Pro: End Changed Code
      }
    }</textarea>
  <input type="checkbox" name="checkbox5" id="checkbox10" />
</p>
<p class="thick">3.4)</p>
<p>Add before the ending ?&gt;</p>
<p>
  <textarea name="textarea11" cols="120" rows="7" readonly="readonly" id="textarea12">//++++ QT Pro: Begin Changed code
require('includes/functions/qtpro_functions.php');
//++++ QT Pro: End Changed code
  </textarea>
  <input type="checkbox" name="checkbox6" id="checkbox12" />
</p>
<hr />
<p class="thick">4)</p>
<p>admin/includes/languages/english/products_attributes.php (and all other languages you have installed) </p>
<p>Add:</p>
<p>
  <textarea name="textarea12" cols="120" rows="7" readonly="readonly" id="textarea13">//++++ QT Pro: Begin Changed code
define('TABLE_HEADING_TRACK_STOCK', 'Track Stock?');
//++++ QT Pro: End Changed Code</textarea>
  <input type="checkbox" name="checkbox7" id="checkbox13" />
</p>
<hr />
<p class="thick">5.1)</p>
<p>admin/includes/languages/english.php (and all other languages you have installed) </p>
<p>Find:</p>
<p>
  <textarea name="textarea14" cols="120" rows="7" readonly="readonly" id="textarea14">// reports box text in includes/boxes/reports.php</textarea>
</p>
<p>Add Beneath</p>
<p>
  <textarea name="textarea13" cols="120" rows="7" readonly="readonly" id="textarea14">//++++ QT Pro: Begin Changed code
define('BOX_REPORTS_STATS_LOW_STOCK_ATTRIB', 'Stock Report');
//++++ QT Pro: End Changed Code</textarea>
  <input type="checkbox" name="checkbox8" id="checkbox14" />
</p>
<p class="thick">5.2)</p>
<p>Find:</p>
<p>
  <textarea name="textarea61" cols="120" rows="7" readonly="readonly" id="textarea16">// tools text in includes/boxes/tools.php</textarea>
</p>
<p>Beneath add:</p>
<p>
  <textarea name="textarea62" cols="120" rows="7" readonly="readonly" id="textarea16">define('BOX_TOOLS_QTPRODOCTOR', 'QTPro Doctor');</textarea>
  <input type="checkbox" name="checkbox40" id="checkbox16" />
</p>
<p class="thick">5.3)</p>
<p>Find:</p>
<p>
  <textarea name="textarea24" cols="120" rows="7" readonly="readonly" id="textarea18">define('IMAGE_MOVE', 'Move');</textarea>
</p>
<p>Add below</p>
<p>
  <textarea name="textarea63" cols="120" rows="7" readonly="readonly" id="textarea18">define('IMAGE_QTSTOCK', 'Stock');</textarea>
  <input type="checkbox" name="checkbox41" id="checkbox18" />
</p>
<hr />
<p class="thick">6)</p>
<p>admin/includes/database_tables.php</p>
<p>Add before the final ?&gt;</p>
<p>
  <textarea name="textarea15" cols="120" rows="7" readonly="readonly" id="textarea19">//++++ QT Pro: Begin Changed code
  define('TABLE_PRODUCTS_STOCK', 'products_stock');
//++++ QT Pro: End Changed Code</textarea>
  <input type="checkbox" name="checkbox9" id="checkbox19" />
</p>
<hr />
<p class="thick">7)</p>
<p>admin/includes/filenames.php</p>
<p>Add before the final ?&gt;</p>
<p>
  <textarea name="textarea16" cols="120" rows="7" readonly="readonly" id="textarea20">//++++ QT Pro: Begin Changed code
  define('FILENAME_STATS_LOW_STOCK_ATTRIB', 'stats_low_stock_attrib.php');
  define('FILENAME_STOCK', 'stock.php');
  define('FILENAME_QTPRODOCTOR', 'qtprodoctor.php');
//++++ QT Pro: End Changed Code</textarea>
  <input type="checkbox" name="checkbox10" id="checkbox20" />
</p>
<hr />
<p class="thick">8)</p>
<p>admin/includes/stylesheet.css</p>
<p>Add at the end</p>
<p>
  <textarea name="textarea17" cols="120" rows="7" readonly="readonly" id="textarea21">/*QTpro*/
.OutofStock { background-color: #FFCACB; }
.OutofStockAttrib { font-family: Verdana, Arial, sans-serif; font-size: 10px;  background-color: #FFCACB; color: #000000; }</textarea>
  <input type="checkbox" name="checkbox11" id="checkbox21" />
</p>
<hr />
<p class="thick">9.1)</p>
<p>admin/categories.php</p>
<p>Find:</p>
<p>
  <textarea name="textarea18" cols="120" rows="7" readonly="readonly" id="textarea22">require('includes/application_top.php');</textarea>
</p>
<p>Add Beneath:</p>
<p>
  <textarea name="textarea19" cols="120" rows="7" readonly="readonly" id="textarea22">//++++ QT Pro: Begin Added code
	//Create the product investigation for this product that are used in this page.
	$product_investigation = qtpro_doctor_investigate_product($_GET['pID']);
//++++ QT Pro: End Added code
  </textarea>
  <input type="checkbox" name="checkbox12" id="checkbox22" />
</p>
<p class="thick">9.2)</p>
<p>Find:</p>
<p>
  <textarea name="textarea20" cols="120" rows="7" readonly="readonly" id="textarea24">          $sql_data_array = array('products_quantity' => (int)tep_db_prepare_input($_POST['products_quantity']),
                                  'products_model' => tep_db_prepare_input($_POST['products_model']),
                                  'products_price' => tep_db_prepare_input($_POST['products_price']),
                                  'products_date_available' => $products_date_available,
                                  'products_weight' => (float)tep_db_prepare_input($_POST['products_weight']),
                                  'products_status' => tep_db_prepare_input($_POST['products_status']),
                                  'products_tax_class_id' => tep_db_prepare_input($_POST['products_tax_class_id']),
                                  'manufacturers_id' => (int)tep_db_prepare_input($_POST['manufacturers_id']));</textarea>
</p>
<p>Add Beneath:</p>
<p>
  <textarea name="textarea20" cols="120" rows="7" readonly="readonly" id="textarea24">		//++++ QT Pro: Begin Added code
			if($product_investigation['has_tracked_options'] or $product_investigation['stock_entries_count'] > 0){
				//Do not modify the stock from this page if the product has database entries or has tracked options
				unset($sql_data_array['products_quantity']);
			}
		//++++ QT Pro: End Added code</textarea>
  <input type="checkbox" name="checkbox13" id="checkbox24" />
</p>
<p class="thick">9.3)</p>
<p>Find:</p>
<p>
  <textarea name="textarea21" cols="120" rows="7" readonly="readonly" id="textarea26">// check if the catalog image directory exists
  if (is_dir(DIR_FS_CATALOG_IMAGES)) {
    if (!tep_is_writable(DIR_FS_CATALOG_IMAGES)) $messageStack->add(ERROR_CATALOG_IMAGE_DIRECTORY_NOT_WRITEABLE, 'error');
  } else {
    $messageStack->add(ERROR_CATALOG_IMAGE_DIRECTORY_DOES_NOT_EXIST, 'error');
  }</textarea>
</p>
<p>Add Beneath:</p>
<p>
  <textarea name="textarea21" cols="120" rows="7" readonly="readonly" id="textarea26">  //++++ QT Pro: Begin Changed code
  if($product_investigation['any_problems']){
  	$messageStack->add('<strong>Warning: </strong>'. qtpro_doctor_formulate_product_investigation($product_investigation, 'short_suggestion') ,'warning');
  }
  //++++ QT Pro: End Changed code</textarea>
  <input type="checkbox" name="checkbox14" id="checkbox26" />
</p>
<p class="thick">9.4)</p>
<p>Find:</p>
<p>
  <textarea name="textarea22" cols="120" rows="7" readonly="readonly" id="textarea28">          <tr>
            <td class="main"><?php echo TEXT_PRODUCTS_QUANTITY; ?></td>
            <td class="main"><?php echo tep_draw_separator('pixel_trans.gif', '24', '15') . '&nbsp;' . tep_draw_input_field('products_quantity', $pInfo->products_quantity); ?></td>
          </tr>
  </textarea>
</p>
<p>Change to: </p>
<p>
  <textarea name="textarea22" cols="120" rows="7" readonly="readonly" id="textarea28">          <tr>
            <td class="main"><?php echo TEXT_PRODUCTS_QUANTITY; ?></td>
             <?php //++++ QT Pro: Begin Changed code
			if($product_investigation['has_tracked_options'] or $product_investigation['stock_entries_count'] > 0)
			{
		  	?>
			<td class="main"><?php echo tep_draw_separator('pixel_trans.gif', '24', '15') . '&nbsp;<a href="' . tep_href_link('stock.php', 'product_id=' . $pInfo->products_id) . ' " target="_blank">' . tep_image_button('button_stock.gif', "Stock") . '</a>'?></td>
			<?php 
			
			}else{
			?>
			<td class="main"><?php echo tep_draw_separator('pixel_trans.gif', '24', '15') . '&nbsp;' . tep_draw_input_field('products_quantity', $pInfo->products_quantity); ?></td>
			<?php 
			}
			//++++ QT Pro: End Changed code
		  	?>
          </tr>
  </textarea>
  <input type="checkbox" name="checkbox15" id="checkbox28" />
</p>
<p class="thick">9.5)</p>
<p>Find:</p>
<p>
  <textarea name="textarea23" cols="120" rows="7" readonly="readonly" id="textarea30">$contents[] = array('align' => 'center', 'text' => tep_draw_button(IMAGE_EDIT, 'document', tep_href_link('categories.php', 'cPath=' . $cPath . '&pID=' . $pInfo->products_id . '&action=new_product')) . tep_draw_button(IMAGE_DELETE, 'trash', tep_href_link('categories.php', 'cPath=' . $cPath . '&pID=' . $pInfo->products_id . '&action=delete_product')) . tep_draw_button(IMAGE_MOVE, 'arrow-4', tep_href_link('categories.php', 'cPath=' . $cPath . '&pID=' . $pInfo->products_id . '&action=move_product')) . tep_draw_button(IMAGE_COPY_TO, 'copy', tep_href_link('categories.php', 'cPath=' . $cPath . '&pID=' . $pInfo->products_id . '&action=copy_to')));</textarea>
</p>
<p>Change to: </p>
<p>
  <textarea name="textarea23" cols="120" rows="7" readonly="readonly" id="textarea30">$contents[] = array('align' => 'center', 'text' => tep_draw_button(IMAGE_EDIT, 'document', tep_href_link('categories.php', 'cPath=' . $cPath . '&pID=' . $pInfo->products_id . '&action=new_product')) . tep_draw_button(IMAGE_DELETE, 'trash', tep_href_link('categories.php', 'cPath=' . $cPath . '&pID=' . $pInfo->products_id . '&action=delete_product')) . tep_draw_button(IMAGE_MOVE, 'arrow-4', tep_href_link('categories.php', 'cPath=' . $cPath . '&pID=' . $pInfo->products_id . '&action=move_product')) . tep_draw_button(IMAGE_COPY_TO, 'copy', tep_href_link('categories.php', 'cPath=' . $cPath . '&pID=' . $pInfo->products_id . '&action=copy_to')) . tep_draw_button(IMAGE_QTSTOCK, 'copy', tep_href_link('stock.php', 'product_id=' . $pInfo->products_id)));</textarea>
  <input type="checkbox" name="checkbox16" id="checkbox30" />
</p>
<p>&nbsp;</p>
<hr />
<p class="thick">10</p>
<p>admin/includes/header.php</p>
<p>Find:</p>
<p>
  <textarea name="textarea25" cols="120" rows="7" readonly="readonly" id="textarea32">  if ($messageStack->size > 0) {
    echo $messageStack->output();
  }
?>
  </textarea>
</p>
<p>Add Beneath:</p>
<p>
  <textarea name="textarea25" cols="120" rows="7" readonly="readonly" id="textarea32"><?php //++++ QT Pro: Begin added code

$qtpro_sick_count = qtpro_sick_product_count();
if($qtpro_sick_count != 0){
?>
<table border="0" width="100%" cellspacing="0" cellpadding="0"><tr><td class="messageStackWarning"><?php echo 'Warning: There are '. $qtpro_sick_count . ' sick products in the database. Please visit <a href="' . tep_href_link('qtprodoctor.php') . '" class="headerLink">the QTPro doctor</a>.'; ?></td></tr></table>
<?php
}
//++++ QT Pro: End added code ?>
  </textarea>
  <input type="checkbox" name="checkbox17" id="checkbox32" />
</p>
<p></p>
<hr />
<p class="thick">11.1)</p>
<p>admin/products_attributes.php</p>
<p>Find:</p>
<p>
  <textarea name="textarea26" cols="120" rows="7" readonly="readonly" id="textarea34">tep_db_query("insert into " . TABLE_PRODUCTS_OPTIONS . " (products_options_id, products_options_name, language_id) values ('" . (int)$products_options_id . "', '" . tep_db_input($option_name) . "', '" . (int)$languages[$i]['id'] . "')");
  </textarea>
</p>
<p>Change to:</p>
<p>
  <textarea name="textarea26" cols="120" rows="7" readonly="readonly" id="textarea34">//++++ QT Pro: Begin Changed code
          $track_stock=isset($_POST['track_stock'])?1:0;
          tep_db_query("insert into " . TABLE_PRODUCTS_OPTIONS . " (products_options_id, products_options_name, language_id,products_options_track_stock) values ('" . (int)$products_options_id . "', '" . tep_db_input($option_name) . "', '" . (int)$languages[$i]['id'] . "', '" . (int)$track_stock . "')");
//++++ QT Pro: End Changed Code
  </textarea>
  <input type="checkbox" name="checkbox18" id="checkbox34" />
</p>
<p class="thick">11.2)</p>
<p>Find:</p>
<p>
  <textarea name="textarea27" cols="120" rows="7" readonly="readonly" id="textarea36">          tep_db_query("update " . TABLE_PRODUCTS_OPTIONS . " set products_options_name = '" . tep_db_input($option_name) . "' where products_options_id = '" . (int)$option_id . "' and language_id = '" . (int)$languages[$i]['id'] . "'");
  </textarea>
</p>
<p>Change to:</p>
<p>
  <textarea name="textarea27" cols="120" rows="7" readonly="readonly" id="textarea36">//++++ QT Pro: Begin Changed code
          $track_stock=isset($_POST['track_stock'])?1:0;
          tep_db_query("update " . TABLE_PRODUCTS_OPTIONS . " set products_options_track_stock='" . (int)$track_stock . "',products_options_name = '" . tep_db_input($option_name) . "' where products_options_id = '" . (int)$option_id . "' and language_id = '" . (int)$languages[$i]['id'] . "'");
//++++ QT Pro: End Changed Code</textarea>
  <input type="checkbox" name="checkbox19" id="checkbox36" />
</p>
<p class="thick">11.3)</p>
<p>Warning: Some people may find that some of the echo's are "bugged". 
<br />
If it is, go into the old file, and find what should come after the corisponding echo's in the new file. Paste that code after the echo.
<p>Find: &lt;!-- options //--&gt;</p>
<p>to &lt;!-- options eof //--&gt; Change all between to:</p>
<p>
  <textarea name="textarea28" cols="120" rows="7" readonly="readonly" id="textarea38"><!-- options //-->
<?php
  if ($action == 'delete_product_option') { // delete product option
    $options = tep_db_query("select products_options_id, products_options_name from " . TABLE_PRODUCTS_OPTIONS . " where products_options_id = '" . (int)$_GET['option_id'] . "' and language_id = '" . (int)$languages_id . "'");
    $options_values = tep_db_fetch_array($options);
?>
              <tr>
                <td class="pageHeading">&nbsp;<?php echo $options_values['products_options_name']; ?>&nbsp;</td>
              </tr>
              <tr>
                <td><table border="0" width="100%" cellspacing="0" cellpadding="2">
                  <tr>
                    <td colspan="3"><?php echo tep_black_line(); ?></td>
                  </tr>
<?php
    $products = tep_db_query("select p.products_id, pd.products_name, pov.products_options_values_name from " . TABLE_PRODUCTS . " p, " . TABLE_PRODUCTS_OPTIONS_VALUES . " pov, " . TABLE_PRODUCTS_ATTRIBUTES . " pa, " . TABLE_PRODUCTS_DESCRIPTION . " pd where pd.products_id = p.products_id and pov.language_id = '" . (int)$languages_id . "' and pd.language_id = '" . (int)$languages_id . "' and pa.products_id = p.products_id and pa.options_id='" . (int)$_GET['option_id'] . "' and pov.products_options_values_id = pa.options_values_id order by pd.products_name");
    if (tep_db_num_rows($products)) {
?>
                  <tr class="dataTableHeadingRow">
                    <td class="dataTableHeadingContent" align="center">&nbsp;<?php echo TABLE_HEADING_ID; ?>&nbsp;</td>
                    <td class="dataTableHeadingContent">&nbsp;<?php echo TABLE_HEADING_PRODUCT; ?>&nbsp;</td>
                    <td class="dataTableHeadingContent">&nbsp;<?php echo TABLE_HEADING_OPT_VALUE; ?>&nbsp;</td>
                  </tr>
                  <tr>
                    <td colspan="3"><?php echo tep_black_line(); ?></td>
                  </tr>
<?php
      $rows = 0;
      while ($products_values = tep_db_fetch_array($products)) {
        $rows++;
?>
                  <tr class="<?php echo (floor($rows/2) == ($rows/2) ? 'attributes-even' : 'attributes-odd'); ?>">
                    <td align="center" class="smallText">&nbsp;<?php echo $products_values['products_id']; ?>&nbsp;</td>
                    <td class="smallText">&nbsp;<?php echo $products_values['products_name']; ?>&nbsp;</td>
                    <td class="smallText">&nbsp;<?php echo $products_values['products_options_values_name']; ?>&nbsp;</td>
                  </tr>
<?php
      }
?>
                  <tr>
                    <td colspan="3"><?php echo tep_black_line(); ?></td>
                  </tr>
                  <tr>
                    <td colspan="3" class="main"><br><?php echo TEXT_WARNING_OF_DELETE; ?></td>
                  </tr>
                  <tr>
                    <td align="right" colspan="3" class="main"><br><?php echo '<a href="' . tep_href_link('products_attributes.php', $page_info, 'NONSSL') . '">'; ?><?php echo tep_image_button('button_cancel.gif', ' cancel '); ?></a>&nbsp;</td>
                  </tr>
<?php
    } else {
?>
                  <tr>
                    <td class="main" colspan="3"><br><?php echo TEXT_OK_TO_DELETE; ?></td>
                  </tr>
                  <tr>
                    <td class="main" align="right" colspan="3"><br><?php echo '<a href="' . tep_href_link('products_attributes.php', 'action=delete_option&option_id=' . $_GET['option_id'] . '&' . $page_info, 'NONSSL') . '">'; ?><?php echo tep_image_button('button_delete.gif', ' delete '); ?></a>&nbsp;&nbsp;&nbsp;<?php echo '<a href="' . tep_href_link('products_attributes.php', $page_info, 'NONSSL') . '">'; ?><?php echo tep_image_button('button_cancel.gif', ' cancel '); ?></a>&nbsp;</td>
                  </tr>
<?php
    }
?>
                </table></td>
              </tr>
<?php
  } else {
?>
              <tr>
                <td colspan="3" class="pageHeading">&nbsp;<?php echo HEADING_TITLE_OPT; ?>&nbsp;</td>
              </tr>
              <tr>
                <td colspan="3" class="smallText" align="right">
<?php
    $options = "select * from " . TABLE_PRODUCTS_OPTIONS . " where language_id = '" . (int)$languages_id . "' order by products_options_id";
    $options_split = new splitPageResults($option_page, MAX_ROW_LISTS_OPTIONS, $options, $options_query_numrows);

    echo $options_split->display_links($options_query_numrows, MAX_ROW_LISTS_OPTIONS, MAX_DISPLAY_PAGE_LINKS, $option_page, 'value_page=' . $value_page . '&attribute_page=' . $attribute_page, 'option_page');
?>
                </td>
              </tr>
              <tr>
<?php
//++++ QT Pro: Begin Changed code
?>
                <td colspan="4"><?php echo tep_black_line(); ?></td>
<?php
//++++ QT Pro: End Changed Code
?>
              </tr>
              <tr class="dataTableHeadingRow">
                <td class="dataTableHeadingContent">&nbsp;<?php echo TABLE_HEADING_ID; ?>&nbsp;</td>
                <td class="dataTableHeadingContent">&nbsp;<?php echo TABLE_HEADING_OPT_NAME; ?>&nbsp;</td>
<?php
//++++ QT Pro: Begin Changed code
?>
                <td class="dataTableHeadingContent">&nbsp;<?php echo TABLE_HEADING_TRACK_STOCK; ?>&nbsp;</td>
<?php
//++++ QT Pro: End Changed Code
?>
                <td class="dataTableHeadingContent" align="center">&nbsp;<?php echo TABLE_HEADING_ACTION; ?>&nbsp;</td>
              </tr>
              <tr>
<?php
//++++ QT Pro: Begin Changed code
?>
                <td colspan="4"><?php echo tep_black_line(); ?></td>
<?php
//++++ QT Pro: End Changed Code
?>
              </tr>
<?php
    $next_id = 1;
    $rows = 0;
    $options = tep_db_query($options);
    while ($options_values = tep_db_fetch_array($options)) {
      $rows++;
?>
              <tr class="<?php echo (floor($rows/2) == ($rows/2) ? 'attributes-even' : 'attributes-odd'); ?>">
<?php
      if (($action == 'update_option') && ($_GET['option_id'] == $options_values['products_options_id'])) {
        echo '
        $inputs = '';
        for ($i = 0, $n = sizeof($languages); $i < $n; $i ++) {
          $option_name = tep_db_query("select products_options_name from " . TABLE_PRODUCTS_OPTIONS . " where products_options_id = '" . $options_values['products_options_id'] . "' and language_id = '" . $languages[$i]['id'] . "'");
          $option_name = tep_db_fetch_array($option_name);
          $inputs .= $languages[$i]['code'] . ':&nbsp;<input type="text" name="option_name[' . $languages[$i]['id'] . ']" size="20" value="' . $option_name['products_options_name'] . '">&nbsp;<br>';
        }
?>
                <td align="center" class="smallText">&nbsp;<?php echo $options_values['products_options_id']; ?><input type="hidden" name="option_id" value="<?php echo $options_values['products_options_id']; ?>">&nbsp;</td>
                <td class="smallText"><?php echo $inputs; ?></td>
<?php
//++++ QT Pro: Begin Changed code
?>
                <td align="center" class="smallText"><input type=checkbox name=track_stock <?php echo $options_values['products_options_track_stock']?"checked":""; ?>></td>
<?php
//++++ QT Pro: End Changed Code
?>
                <td align="center" class="smallText">&nbsp;<?php echo tep_image_submit('button_update.gif', IMAGE_UPDATE); ?>&nbsp;<?php echo '<a href="' . tep_href_link('products_attributes.php', $page_info, 'NONSSL') . '">'; ?><?php echo tep_image_button('button_cancel.gif', IMAGE_CANCEL); ?></a>&nbsp;</td>
<?php
        echo '
      } else {
?>
                <td align="center" class="smallText">&nbsp;<?php echo $options_values["products_options_id"]; ?>&nbsp;</td>
                <td class="smallText">&nbsp;<?php echo $options_values["products_options_name"]; ?>&nbsp;</td>
<?php
//++++ QT Pro: Begin Changed code
?>
                <td align="center" class="smallText">&nbsp;<?php echo $options_values['products_options_track_stock']?"Yes":"No"; ?></td>
<?php
//++++ QT Pro: End Changed Code
?>
                <td align="center" class="smallText">&nbsp;<?php echo '<a href="' . tep_href_link('products_attributes.php', 'action=update_option&option_id=' . $options_values['products_options_id'] . '&' . $page_info, 'NONSSL') . '">'; ?><?php echo tep_image_button('button_edit.gif', IMAGE_UPDATE); ?></a>&nbsp;&nbsp;<?php echo '<a href="' . tep_href_link('products_attributes.php', 'action=delete_product_option&option_id=' . $options_values['products_options_id'] . '&' . $page_info, 'NONSSL') , '">'; ?><?php echo tep_image_button('button_delete.gif', IMAGE_DELETE); ?></a>&nbsp;</td>
<?php
      }
?>
              </tr>
<?php
      $max_options_id_query = tep_db_query("select max(products_options_id) + 1 as next_id from " . TABLE_PRODUCTS_OPTIONS);
      $max_options_id_values = tep_db_fetch_array($max_options_id_query);
      $next_id = $max_options_id_values['next_id'];
    }
?>
              <tr>
<?php
//++++ QT Pro: Begin Changed code
?>
                <td colspan="4"><?php echo tep_black_line(); ?></td>
<?php
//++++ QT Pro: End Changed Code
?>
              </tr>
<?php
    if ($action != 'update_option') {
?>
              <tr class="<?php echo (floor($rows/2) == ($rows/2) ? 'attributes-even' : 'attributes-odd'); ?>">
<?php
      echo '
      $inputs = '';
      for ($i = 0, $n = sizeof($languages); $i < $n; $i ++) {
        $inputs .= $languages[$i]['code'] . ':&nbsp;<input type="text" name="option_name[' . $languages[$i]['id'] . ']" size="20">&nbsp;<br>';
      }
?>
                <td align="center" class="smallText">&nbsp;<?php echo $next_id; ?>&nbsp;</td>
                <td class="smallText"><?php echo $inputs; ?></td>
<?php
//++++ QT Pro: Begin Changed code
?>
                <td align="center" ><input type=checkbox name=track_stock></td>
                <td align="left" class="smallText">&nbsp;<?php echo tep_image_submit('button_insert.gif', IMAGE_INSERT); ?>&nbsp;</td>
<?php
//++++ QT Pro: End Changed Code
      echo '
?>
              </tr>
              <tr>
<?php
//++++ QT Pro: Begin Changed code
?>
                <td colspan="4"><?php echo tep_black_line(); ?></td>
<?php
//++++ QT Pro: End Changed Code
?>
              </tr>
<?php
    }
  }
?>
            </table></td>
<!-- options eof //--></textarea>
  <input type="checkbox" name="checkbox20" id="checkbox38" />
</p>
<hr />
<h2>Thats all for the admin directory! Now for the catalog directory.</h2>
<hr />
<p class="thick">12.1)</p>
<p>includes/classes/order.php</p>
<p>Find:</p>
<p>
  <textarea name="textarea29" cols="120" rows="7" readonly="readonly" id="textarea40">            $attributes_query = tep_db_query("select popt.products_options_name, poval.products_options_values_name, pa.options_values_price, pa.price_prefix from " . TABLE_PRODUCTS_OPTIONS . " popt, " . TABLE_PRODUCTS_OPTIONS_VALUES . " poval, " . TABLE_PRODUCTS_ATTRIBUTES . " pa where pa.products_id = '" . (int)$products[$i]['id'] . "' and pa.options_id = '" . (int)$option . "' and pa.options_id = popt.products_options_id and pa.options_values_id = '" . (int)$value . "' and pa.options_values_id = poval.products_options_values_id and popt.language_id = '" . (int)$languages_id . "' and poval.language_id = '" . (int)$languages_id . "'");
  </textarea>
</p>
<p>Change to:</p>
<p>
  <textarea name="textarea29" cols="120" rows="7" readonly="readonly" id="textarea40">            $attributes_query = tep_db_query("select popt.products_options_name, popt.products_options_track_stock, poval.products_options_values_name, pa.options_values_price, pa.price_prefix from " . TABLE_PRODUCTS_OPTIONS . " popt, " . TABLE_PRODUCTS_OPTIONS_VALUES . " poval, " . TABLE_PRODUCTS_ATTRIBUTES . " pa where pa.products_id = '" . (int)$products[$i]['id'] . "' and pa.options_id = '" . (int)$option . "' and pa.options_id = popt.products_options_id and pa.options_values_id = '" . (int)$value . "' and pa.options_values_id = poval.products_options_values_id and popt.language_id = '" . (int)$languages_id . "' and poval.language_id = '" . (int)$languages_id . "'");
  </textarea>
  <input type="checkbox" name="checkbox21" id="checkbox40" />
</p>
<p class="thick">12.1)</p>
<p>Find:</p>
<p>
  <textarea name="textarea30" cols="120" rows="7" readonly="readonly" id="textarea42">
            $this->products[$index]['attributes'][$subindex] = array('option' => $attributes['products_options_name'],
                                                                     'value' => $attributes['products_options_values_name'],
                                                                     'option_id' => $option,
                                                                     'value_id' => $value,
                                                                     'prefix' => $attributes['price_prefix'],
                                                                     'price' => $attributes['options_values_price']);</textarea>
</p>
<p>Change to:</p>
<p>
  <textarea name="textarea30" cols="120" rows="7" readonly="readonly" id="textarea42">            $this->products[$index]['attributes'][$subindex] = array('option' => $attributes['products_options_name'],
                                                                     'value' => $attributes['products_options_values_name'],
                                                                     'option_id' => $option,
                                                                     'value_id' => $value,
                                                                     'prefix' => $attributes['price_prefix'],
                                                                     'price' => $attributes['options_values_price'],
                                                                     'track_stock' => $attributes['products_options_track_stock']);
  </textarea>
  <input type="checkbox" name="checkbox22" id="checkbox42" />
</p>
<hr />
<p class="thick">13.1)</p>
<p>includes/functions/general.php</p>
<p>Find:</p>
<p>
  <textarea name="textarea31" cols="120" rows="7" readonly="readonly" id="textarea44">////
// Return a product's stock
// TABLES: products
  function tep_get_products_stock($products_id) {
    $products_id = tep_get_prid($products_id);
    $stock_query = tep_db_query("select products_quantity from " . TABLE_PRODUCTS . " where products_id = '" . (int)$products_id . "'");
    $stock_values = tep_db_fetch_array($stock_query);

    return $stock_values['products_quantity'];
  }</textarea>
</p>
<p>Change to:</p>
<p>
  <textarea name="textarea31" cols="120" rows="7" readonly="readonly" id="textarea44">////
// Return a product's stock
// TABLES: products
//++++ QT Pro: Begin Changed code
  function tep_get_products_stock($products_id, $attributes=array()) {
    global $languages_id;
    $products_id = tep_get_prid($products_id);
    if (sizeof($attributes)>0) {
      $all_nonstocked = true;
      $attr_list='';
      $options_list=implode(",",array_keys($attributes));
      $track_stock_query=tep_db_query("select products_options_id, products_options_track_stock from " . TABLE_PRODUCTS_OPTIONS . " where products_options_id in ($options_list) and language_id= '" . (int)$languages_id . "order by products_options_id'");
      while($track_stock_array=tep_db_fetch_array($track_stock_query)) {
        if ($track_stock_array['products_options_track_stock']) {
          $attr_list.=$track_stock_array['products_options_id'] . '-' . $attributes[$track_stock_array['products_options_id']] . ',';
          $all_nonstocked=false;
        }
      }
      $attr_list=substr($attr_list,0,strlen($attr_list)-1);
    }
    
    if ((sizeof($attributes)==0) | ($all_nonstocked)) {
      $stock_query = tep_db_query("select products_quantity as quantity from " . TABLE_PRODUCTS . " where products_id = '" . (int)$products_id . "'");
    } else {
      $stock_query=tep_db_query("select products_stock_quantity as quantity from " . TABLE_PRODUCTS_STOCK . " where products_id='". (int)$products_id . "' and products_stock_attributes='$attr_list'");
    }
    if (tep_db_num_rows($stock_query)>0) {
      $stock=tep_db_fetch_array($stock_query);
      $quantity=$stock['quantity'];
    } else {
      $quantity = 0;
    }
    return $quantity;
//++++ QT Pro: End Changed Code
  }
  </textarea>
  <input type="checkbox" name="checkbox23" id="checkbox44" />
</p>
<p class="thick">13.2)</p>
<p>Find:</p>
<p>
  <textarea name="textarea32" cols="120" rows="7" readonly="readonly" id="textarea46">// Check if the required stock is available
// If insufficent stock is available return an out of stock message
  function tep_check_stock($products_id, $products_quantity) {
    $stock_left = tep_get_products_stock($products_id) - $products_quantity;
    $out_of_stock = '';</textarea>
</p>
<p>Change to:</p>
<p>
  <textarea name="textarea32" cols="120" rows="7" readonly="readonly" id="textarea46">// Check if the required stock is available
// If insufficent stock is available return an out of stock message
//++++ QT Pro: Begin Changed code
  function tep_check_stock($products_id, $products_quantity, $attributes=array()) {
    $stock_left = tep_get_products_stock($products_id, $attributes) - $products_quantity;
//++++ QT Pro: End Changed Code
    $out_of_stock = '';</textarea>
  <input type="checkbox" name="checkbox24" id="checkbox46" />
</p>
<hr />
<p class="thick">14)</p>
<p>includes/languages/english/product_info.php (and all other languages you have installed)</p>
<p>Add before ending ?&gt;</p>
<p>
  <textarea name="textarea33" cols="120" rows="7" readonly="readonly" id="textarea48">//++++ QT Pro: Begin Changed code
define('TEXT_OUT_OF_STOCK', 'Out of stock');
define('TEXT_OUT_OF_STOCK_MESSAGE', 'The combination of options you have selected is currently out of stock.  Please select another combination.');
define('TEXT_SELECT_OPTIONS', 'You must select product options before adding this product to your cart.');
define('STOCK_LIST_IN_PI_TEXT_HEADING', 'Currently on stock:');
define('STOCK_LIST_IN_PI_TEXT_PRICE', 'Price');
define('STOCK_LIST_IN_PI_TEXT_STOCK', 'Qty.');
//++++ QT Pro: End Changed Code</textarea>
  <input type="checkbox" name="checkbox25" id="checkbox48" />
</p>
<hr />
<p class="thick">15)</p>
<p>includes/application_top.php</p>
<p>Find:</p>
<p>
  <textarea name="textarea34" cols="120" rows="7" readonly="readonly" id="textarea50">     case 'add_product' :    if (isset($_POST['products_id']) && is_numeric($_POST['products_id'])) {
                                $attributes = isset($_POST['id']) ? $_POST['id'] : '';
                                $cart->add_cart($_POST['products_id'], $cart->get_quantity(tep_get_uprid($_POST['products_id'], $attributes))+1, $attributes);
                              }</textarea>
</p>
<p>Change to:</p>
<p>
  <textarea name="textarea35" cols="120" rows="7" readonly="readonly" id="textarea50">      case 'add_product' :    if (isset($_POST['products_id']) && is_numeric($_POST['products_id'])) {
//++++ QT Pro: Begin Changed code
                                $attributes=array();
                                if (isset($_POST['attrcomb']) && (preg_match("/^\d{1,10}-\d{1,10}(,\d{1,10}-\d{1,10})*$/",$_POST['attrcomb']))) {
                                  $attrlist=explode(',',$_POST['attrcomb']);
                                  foreach ($attrlist as $attr) {
                                    list($oid, $oval)=explode('-',$attr);
                                    if (is_numeric($oid) && $oid==(int)$oid && is_numeric($oval) && $oval==(int)$oval)
                                      $attributes[$oid]=$oval;
                                  }
                                }
                                if (isset($_POST['id']) && is_array($_POST['id'])) {
                                  foreach ($_POST['id'] as $key=>$val) {
                                    if (is_numeric($key) && $key==(int)$key && is_numeric($val) && $val==(int)$val)
                                      $attributes=$attributes + $_POST['id'];
                                  }
                                }
                                $cart->add_cart($_POST['products_id'], $cart->get_quantity(tep_get_uprid($_POST['products_id'], $attributes))+1, $attributes);
//++++ QT Pro: End Changed Code
                              }</textarea>
  <input type="checkbox" name="checkbox26" id="checkbox50" />
</p>
<hr />
<p class="thick">16)</p>
<p>includes/database_table.php</p>
<p>Add before ending ?&gt;</p>
<p>
  <textarea name="textarea36" cols="120" rows="7" readonly="readonly" id="textarea74">//++++ QT Pro: Begin Changed code
  define('TABLE_PRODUCTS_STOCK', 'products_stock');
//++++ QT Pro: End Changed Code</textarea>
  <input type="checkbox" name="checkbox27" id="checkbox74" />
</p>
<hr />
<p class="thick">17.1)</p>
<p>checkout_confirmation.php</p>
<p>Find:</p>
<p>
  <textarea name="textarea37" cols="120" rows="7" readonly="readonly" id="textarea52">// Stock Check
  $any_out_of_stock = false;
  if (STOCK_CHECK == 'true') {
    for ($i=0, $n=sizeof($order->products); $i<$n; $i++) {
      if (tep_check_stock($order->products[$i]['id'], $order->products[$i]['qty'])) {
        $any_out_of_stock = true;
      }
    }</textarea>
</p>
<p>Change to:</p>
<p>
  <textarea name="textarea38" cols="120" rows="7" readonly="readonly" id="textarea52">// Stock Check
  $any_out_of_stock = false;
  if (STOCK_CHECK == 'true') {
//++++ QT Pro: Begin Changed code
    $check_stock='';
    for ($i=0, $n=sizeof($order->products); $i<$n; $i++) {
      if (isset($order->products[$i]['attributes']) && is_array($order->products[$i]['attributes'])) {
        $attributes=array();
        foreach ($order->products[$i]['attributes'] as $attribute) {
          $attributes[$attribute['option_id']]=$attribute['value_id'];
        }
        $check_stock[$i] = tep_check_stock($order->products[$i]['id'], $order->products[$i]['qty'], $attributes);
      } else {
        $check_stock[$i] = tep_check_stock($order->products[$i]['id'], $order->products[$i]['qty']);
      }
      if ($check_stock[$i]) {
        $any_out_of_stock = true;
      }
//++++ QT Pro: End Changed Code
    }</textarea>
  <input type="checkbox" name="checkbox28" id="checkbox52" />
</p>
<p class="thick">17.2)</p>
<p>Find:</p>
<p>
  <textarea name="textarea39" cols="120" rows="7" readonly="readonly" id="textarea54">    if (STOCK_CHECK == 'true') {
      echo tep_check_stock($order->products[$i]['id'], $order->products[$i]['qty']);
    }</textarea>
</p>
<p>Change to:</p>
<p>
  <textarea name="textarea40" cols="120" rows="7" readonly="readonly" id="textarea54">    if (STOCK_CHECK == 'true') {
//++++ QT Pro: Begin Changed code
      echo $check_stock[$i];
//++++ QT Pro: End Changed Code
    }</textarea>
  <input type="checkbox" name="checkbox29" id="checkbox54" />
</p>
<hr />
<p class="thick">18)</p>
<p>checkout_payment.php</p>
<p>Find:</p>
<p>
  <textarea name="textarea41" cols="120" rows="7" readonly="readonly" id="textarea56">// Stock Check
  if ( (STOCK_CHECK == 'true') && (STOCK_ALLOW_CHECKOUT != 'true') ) {
    $products = $cart->get_products();
    for ($i=0, $n=sizeof($products); $i<$n; $i++) {
      if (tep_check_stock($products[$i]['id'], $products[$i]['quantity'])) {
        tep_redirect(tep_href_link('shopping_cart.php'));
        break;
      }
    }
  }
</textarea>
</p>
<p>Change to:</p>
<p>
  <textarea name="textarea42" cols="120" rows="7" readonly="readonly" id="textarea56">// Stock Check
//++++ QT Pro: Begin Changed code
  if ( (STOCK_CHECK == 'true') && (STOCK_ALLOW_CHECKOUT != 'true') ) {
    $products = $cart->get_products();
    $any_out_of_stock = 0;
    for ($i=0, $n=sizeof($products); $i<$n; $i++) {
     if (isset($products[$i]['attributes']) && is_array($products[$i]['attributes'])) {
       $stock_check = tep_check_stock($products[$i]['id'], $products[$i]['quantity'], $products[$i]['attributes']);
     }
     else{
       $stock_check = tep_check_stock($products[$i]['id'], $products[$i]['quantity']);
     }
     if ($stock_check) $any_out_of_stock = 1;
  	}
    if ($any_out_of_stock == 1) {
      tep_redirect(tep_href_link('shopping_cart.php'));
      break;
    }
 	}
//++++ QT Pro: End Changed Code
</textarea>
  <input type="checkbox" name="checkbox30" id="checkbox56" />
</p>
<hr />
<p class="thick">19.1)</p>
<p>Checkout_process.php</p>
<p>Find:</p>
<p>
  <textarea name="textarea43" cols="120" rows="7" readonly="readonly" id="textarea58">// Stock Update - Joao Correia
    if (STOCK_LIMITED == 'true') {
      if (DOWNLOAD_ENABLED == 'true') {</textarea>
</p>
<p>Change to:</p>
<p>
  <textarea name="textarea44" cols="120" rows="7" readonly="readonly" id="textarea58">//++++ QT Pro: Begin Changed code
    $products_stock_attributes=null;
    if (STOCK_LIMITED == 'true') {
        $products_attributes = $order->products[$i]['attributes'];
//      if (DOWNLOAD_ENABLED == 'true') {
//++++ QT Pro: End Changed Code</textarea>
  <input type="checkbox" name="checkbox31" id="checkbox58" />
</p>
<p class="thick">19.2)</p>
<p>Find:</p>
<p>
  <textarea name="textarea45" cols="120" rows="7" readonly="readonly" id="textarea60">        $products_attributes = $order->products[$i]['attributes'];
  </textarea>
</p>
<p>Change to: (just comment out)</p>
<p>
  <textarea name="textarea46" cols="120" rows="7" readonly="readonly" id="textarea60">//++++ QT Pro: Begin Changed code
//      $products_attributes = $order->products[$i]['attributes'];
//++++ QT Pro: End Changed Code</textarea>
  <input type="checkbox" name="checkbox32" id="checkbox60" />
</p>
<p class="thick">19.3)</p>
<p>Find:</p>
<p>
  <textarea name="textarea47" cols="120" rows="7" readonly="readonly" id="textarea62">// do not decrement quantities if products_attributes_filename exists
        if ((DOWNLOAD_ENABLED != 'true') || (!$stock_values['products_attributes_filename'])) {
          $stock_left = $stock_values['products_quantity'] - $order->products[$i]['qty'];
        } else {
          $stock_left = $stock_values['products_quantity'];
        }
        tep_db_query("update " . TABLE_PRODUCTS . " set products_quantity = '" . $stock_left . "' where products_id = '" . tep_get_prid($order->products[$i]['id']) . "'");
  </textarea>
</p>
<p>Change to:</p>
<p>
  <textarea name="textarea48" cols="120" rows="7" readonly="readonly" id="textarea62">
        $actual_stock_bought = $order->products[$i]['qty'];
        $download_selected = false;
        if ((DOWNLOAD_ENABLED == 'true') && isset($stock_values['products_attributes_filename']) && tep_not_null($stock_values['products_attributes_filename'])) {
          $download_selected = true;
          $products_stock_attributes='$$DOWNLOAD$$';
        }
// If not downloadable and attributes present, adjust attribute stock
        if (!$download_selected && is_array($products_attributes)) {
          $all_nonstocked = true;
          $products_stock_attributes_array = array();
          foreach ($products_attributes as $attribute) {
            if ($attribute['track_stock'] == 1) {
              $products_stock_attributes_array[] = $attribute['option_id'] . "-" . $attribute['value_id'];
              $all_nonstocked = false;
            }
          } 
          if ($all_nonstocked) {
            $actual_stock_bought = $order->products[$i]['qty'];
          }  else {
            asort($products_stock_attributes_array, SORT_NUMERIC);
            $products_stock_attributes = implode(",", $products_stock_attributes_array);
            $attributes_stock_query = tep_db_query("select products_stock_quantity from " . TABLE_PRODUCTS_STOCK . " where products_stock_attributes = '$products_stock_attributes' AND products_id = '" . tep_get_prid($order->products[$i]['id']) . "'");
            if (tep_db_num_rows($attributes_stock_query) > 0) {
              $attributes_stock_values = tep_db_fetch_array($attributes_stock_query);
              $attributes_stock_left = $attributes_stock_values['products_stock_quantity'] - $order->products[$i]['qty'];
              tep_db_query("update " . TABLE_PRODUCTS_STOCK . " set products_stock_quantity = '" . $attributes_stock_left . "' where products_stock_attributes = '$products_stock_attributes' AND products_id = '" . tep_get_prid($order->products[$i]['id']) . "'");
              $actual_stock_bought = ($attributes_stock_left < 1) ? $attributes_stock_values['products_stock_quantity'] : $order->products[$i]['qty'];
            } else {
              $attributes_stock_left = 0 - $order->products[$i]['qty'];
              tep_db_query("insert into " . TABLE_PRODUCTS_STOCK . " (products_id, products_stock_attributes, products_stock_quantity) values ('" . tep_get_prid($order->products[$i]['id']) . "', '" . $products_stock_attributes . "', '" . $attributes_stock_left . "')");
              $actual_stock_bought = 0;
            }
          }
        }
//        $stock_query = tep_db_query("select products_quantity from " . TABLE_PRODUCTS . " where products_id = '" . tep_get_prid($order->products[$i]['id']) . "'");
//      }
//      if (tep_db_num_rows($stock_query) > 0) {
//        $stock_values = tep_db_fetch_array($stock_query);
// do not decrement quantities if products_attributes_filename exists
        if (!$download_selected) {
          $stock_left = $stock_values['products_quantity'] - $actual_stock_bought;
          tep_db_query("UPDATE " . TABLE_PRODUCTS . " 
                        SET products_quantity = products_quantity - '" . $actual_stock_bought . "' 
                        WHERE products_id = '" . tep_get_prid($order->products[$i]['id']) . "'");
//++++ QT Pro: End Changed Code</textarea>
  <input type="checkbox" name="checkbox33" id="checkbox62" />
</p>
<p class="thick">19.4)</p>
<p>Find:</p>
<p>
  <textarea name="textarea49" cols="120" rows="7" readonly="readonly" id="textarea64">    $sql_data_array = array('orders_id' => $insert_id, 
                            'products_id' => tep_get_prid($order->products[$i]['id']), 
                            'products_model' => $order->products[$i]['model'], 
                            'products_name' => $order->products[$i]['name'], 
                            'products_price' => $order->products[$i]['price'], 
                            'final_price' => $order->products[$i]['final_price'], 
                            'products_tax' => $order->products[$i]['tax'], 
                            'products_quantity' => $order->products[$i]['qty']);
  </textarea>
</p>
<p>Change to:</p>
<p>
  <textarea name="textarea50" cols="120" rows="7" readonly="readonly" id="textarea64">//++++ QT Pro: Begin Changed code
    if (!isset($products_stock_attributes)) $products_stock_attributes=null;
    $sql_data_array = array('orders_id' => $insert_id, 
                            'products_id' => tep_get_prid($order->products[$i]['id']), 
                            'products_model' => $order->products[$i]['model'], 
                            'products_name' => $order->products[$i]['name'], 
                            'products_price' => $order->products[$i]['price'], 
                            'final_price' => $order->products[$i]['final_price'], 
                            'products_tax' => $order->products[$i]['tax'], 
                            'products_quantity' => $order->products[$i]['qty'],
                            'products_stock_attributes' => $products_stock_attributes);
//++++ QT Pro: End Changed Code</textarea>
  <input type="checkbox" name="checkbox34" id="checkbox64" />
</p>
<hr />
<p class="thick">20)</p>
<p>product_info.php</p>
<p> For many people, an error is caused in this file after they make the edit because a loose bracket. Find and remove it if there is an error .
<p>Find:</p>

  <textarea name="textarea53" cols="120" rows="7" readonly="readonly" id="textarea66"><?php
    $products_attributes_query = tep_db_query("select count(*) as total from " . TABLE_PRODUCTS_OPTIONS . " popt, " . TABLE_PRODUCTS_ATTRIBUTES . " patrib where patrib.products_id='" . (int)$_GET['products_id'] . "' and patrib.options_id = popt.products_options_id and popt.language_id = '" . (int)$languages_id . "'");
    $products_attributes = tep_db_fetch_array($products_attributes_query);
    if ($products_attributes['total'] > 0) {
?>

    <p><?php echo TEXT_PRODUCT_OPTIONS; ?></p>

    <p>
<?php
      $products_options_name_query = tep_db_query("select distinct popt.products_options_id, popt.products_options_name from " . TABLE_PRODUCTS_OPTIONS . " popt, " . TABLE_PRODUCTS_ATTRIBUTES . " patrib where patrib.products_id='" . (int)$_GET['products_id'] . "' and patrib.options_id = popt.products_options_id and popt.language_id = '" . (int)$languages_id . "' order by popt.products_options_name");
      while ($products_options_name = tep_db_fetch_array($products_options_name_query)) {
        $products_options_array = array();
        $products_options_query = tep_db_query("select pov.products_options_values_id, pov.products_options_values_name, pa.options_values_price, pa.price_prefix from " . TABLE_PRODUCTS_ATTRIBUTES . " pa, " . TABLE_PRODUCTS_OPTIONS_VALUES . " pov where pa.products_id = '" . (int)$_GET['products_id'] . "' and pa.options_id = '" . (int)$products_options_name['products_options_id'] . "' and pa.options_values_id = pov.products_options_values_id and pov.language_id = '" . (int)$languages_id . "'");
        while ($products_options = tep_db_fetch_array($products_options_query)) {
          $products_options_array[] = array('id' => $products_options['products_options_values_id'], 'text' => $products_options['products_options_values_name']);
          if ($products_options['options_values_price'] != '0') {
            $products_options_array[sizeof($products_options_array)-1]['text'] .= ' (' . $products_options['price_prefix'] . $currencies->display_price($products_options['options_values_price'], tep_get_tax_rate($product_info['products_tax_class_id'])) .') ';
          }
        }

        if (is_string($_GET['products_id']) && isset($cart->contents[$_GET['products_id']]['attributes'][$products_options_name['products_options_id']])) {
          $selected_attribute = $cart->contents[$_GET['products_id']]['attributes'][$products_options_name['products_options_id']];
        } else {
          $selected_attribute = false;
        }
?>
      <strong><?php echo $products_options_name['products_options_name'] . ':'; ?></strong><br /><?php echo tep_draw_pull_down_menu('id[' . $products_options_name['products_options_id'] . ']', $products_options_array, $selected_attribute); ?><br />
<?php
      }
?>
    </p>

<?php
    }
?></textarea>

<p>Change to:</p>

  <textarea name="textarea54" cols="120" rows="7" readonly="readonly" id="textarea66">
<?php
/*    $products_attributes_query = tep_db_query("select count(*) as total from " . TABLE_PRODUCTS_OPTIONS . " popt, " . TABLE_PRODUCTS_ATTRIBUTES . " patrib where patrib.products_id='" . (int)$_GET['products_id'] . "' and patrib.options_id = popt.products_options_id and popt.language_id = '" . (int)$languages_id . "'");
    $products_attributes = tep_db_fetch_array($products_attributes_query);
    if ($products_attributes['total'] > 0) {
?>

    <h4><?php echo TEXT_PRODUCT_OPTIONS; ?></h4>

    <p>
<?php
      $products_options_name_query = tep_db_query("select distinct popt.products_options_id, popt.products_options_name from " . TABLE_PRODUCTS_OPTIONS . " popt, " . TABLE_PRODUCTS_ATTRIBUTES . " patrib where patrib.products_id='" . (int)$_GET['products_id'] . "' and patrib.options_id = popt.products_options_id and popt.language_id = '" . (int)$languages_id . "' order by popt.products_options_name");
      while ($products_options_name = tep_db_fetch_array($products_options_name_query)) {
        $products_options_array = array();
        $products_options_query = tep_db_query("select pov.products_options_values_id, pov.products_options_values_name, pa.options_values_price, pa.price_prefix from " . TABLE_PRODUCTS_ATTRIBUTES . " pa, " . TABLE_PRODUCTS_OPTIONS_VALUES . " pov where pa.products_id = '" . (int)$_GET['products_id'] . "' and pa.options_id = '" . (int)$products_options_name['products_options_id'] . "' and pa.options_values_id = pov.products_options_values_id and pov.language_id = '" . (int)$languages_id . "'");
        while ($products_options = tep_db_fetch_array($products_options_query)) {
          $products_options_array[] = array('id' => $products_options['products_options_values_id'], 'text' => $products_options['products_options_values_name']);
          if ($products_options['options_values_price'] != '0') {
            $products_options_array[sizeof($products_options_array)-1]['text'] .= ' (' . $products_options['price_prefix'] . $currencies->display_price($products_options['options_values_price'], tep_get_tax_rate($product_info['products_tax_class_id'])) .') ';
          }
        }

        if (is_string($_GET['products_id']) && isset($cart->contents[$_GET['products_id']]['attributes'][$products_options_name['products_options_id']])) {
          $selected_attribute = $cart->contents[$_GET['products_id']]['attributes'][$products_options_name['products_options_id']];
        } else {
          $selected_attribute = false;
        }
?>
      <strong><?php echo $products_options_name['products_options_name'] . ':'; ?></strong><br /><?php echo tep_draw_pull_down_menu('id[' . $products_options_name['products_options_id'] . ']', $products_options_array, $selected_attribute, 'style="width: 200px;"'); ?><br />
<?php
      }
?>
    </p>

<?php
    }
*/	
?>
</textarea>
  <input type="checkbox" name="checkbox36" id="checkbox66" />

<hr />
<p class="thick">21.1)</p>
<p>Shopping_cart.php</p>
<p>Find:</p>
<p>
  <textarea name="textarea55" cols="120" rows="7" readonly="readonly" id="textarea68">          $attributes = tep_db_query("select popt.products_options_name, poval.products_options_values_name, pa.options_values_price, pa.price_prefix
  </textarea>
</p>
<p>Change to:</p>
<p>
  <textarea name="textarea56" cols="120" rows="7" readonly="readonly" id="textarea68">          $attributes = tep_db_query("select popt.products_options_name, popt.products_options_track_stock, poval.products_options_values_name, pa.options_values_price, pa.price_prefix
  </textarea>
  <input type="checkbox" name="checkbox37" id="checkbox68" />
</p>
<p class="thick">21.2)</p>
<p>Find:</p>
<p>
  <textarea name="textarea57" cols="120" rows="7" readonly="readonly" id="textarea70">          $products[$i][$option]['price_prefix'] = $attributes_values['price_prefix'];
  </textarea>
</p>
<p>Add beneth</p>
<p>
  <textarea name="textarea58" cols="120" rows="7" readonly="readonly" id="textarea70">          $products[$i][$option]['track_stock'] = $attributes_values['products_options_track_stock'];
  </textarea>
  <input type="checkbox" name="checkbox38" id="checkbox70" />
</p>
<p class="thick">21.3)</p>
<p>Find:</p>
<p>
  <textarea name="textarea59" cols="120" rows="7" readonly="readonly" id="textarea72">        $stock_check = tep_check_stock($products[$i]['id'], $products[$i]['quantity']);
  </textarea>
</p>
<p>Change to:</p>
<p>
  <textarea name="textarea60" cols="120" rows="7" readonly="readonly" id="textarea72">//++++ QT Pro: Begin Changed code
        if (isset($products[$i]['attributes']) && is_array($products[$i]['attributes'])) {
          $stock_check = tep_check_stock($products[$i]['id'], $products[$i]['quantity'], $products[$i]['attributes']); 
        }else{
          $stock_check = tep_check_stock($products[$i]['id'], $products[$i]['quantity']);
        }
//++++ QT Pro: End Changed Code</textarea>
  <input type="checkbox" name="checkbox39" id="checkbox72" />
</p>
<br />
<br />
<p>Done......</p>

REMEMBER: You must activate attribute tracking here:
<br />
 admin -> catalog -> product attributes ->
 <br />
When adding/editing an attribute, you must check the "Track Stock?" checkbox.
<br />
<br />
</body>
</html>
